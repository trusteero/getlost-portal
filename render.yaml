services:
  # Web Service for Next.js application
  - type: web
    name: getlostportal
    runtime: node
    region: oregon # or your preferred region
    plan: free # or starter/standard/pro as needed
    buildCommand: chmod +x scripts/render-build.sh && ./scripts/render-build.sh
    startCommand: npm run start
    envVars:
      - key: NODE_ENV
        value: production
      - key: DATABASE_URL
        fromDatabase:
          name: getlostportal-db
          property: connectionString
      - key: NEXTAUTH_URL
        fromService:
          type: web
          name: getlostportal
          property: host
      - key: NEXTAUTH_SECRET
        generateValue: true
      - key: AUTH_SECRET
        generateValue: true
      - key: TURSO_DATABASE_URL
        sync: false # Set this in Render dashboard
      - key: TURSO_AUTH_TOKEN
        sync: false # Set this in Render dashboard
      - key: AUTH_GOOGLE_ID
        sync: false # Set this in Render dashboard
      - key: AUTH_GOOGLE_SECRET
        sync: false # Set this in Render dashboard
      - key: GMAIL_USER
        sync: false # Set this in Render dashboard
      - key: GMAIL_PASS
        sync: false # Set this in Render dashboard
      - key: ADMIN_EMAILS
        sync: false # Set this in Render dashboard
      - key: OPENAI_API_KEY
        sync: false # Set this in Render dashboard
      - key: ANTHROPIC_API_KEY
        sync: false # Set this in Render dashboard
      - key: REPORT_STORAGE_PATH
        value: /var/data/reports
      - key: UPLOAD_DIR
        value: /var/data/uploads
    disk:
      name: getlostportal-uploads
      mountPath: /var/data
      sizeGB: 1 # Adjust based on your needs

# Database (if using Render's PostgreSQL instead of Turso)
# Uncomment if you want to use Render's database
# databases:
#   - name: getlostportal-db
#     databaseName: getlostportal
#     user: getlostportal
#     region: oregon
#     plan: free # or starter/standard/pro